{% extends "admin/base_site.html" %}
{% load i18n %}

{% block title %}üì• Download Reports{% endblock %}

{% block content %}
<style>
    .report-container {
        max-width: 900px;
        margin: 0 auto;
    }

    .report-card {
        background: #fff;
        border: 1px solid #dfe3e8;
        border-radius: 12px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    .report-card h2 {
        color: #417690;
        font-size: 20px;
        margin: 0 0 5px;
    }

    .report-card p.desc {
        color: #888;
        font-size: 13px;
        margin: 0 0 20px;
    }

    .filter-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 20px;
    }

    .filter-grid label {
        font-size: 12px;
        font-weight: 600;
        color: #555;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        display: block;
        margin-bottom: 4px;
    }

    .filter-grid input,
    .filter-grid select {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid #ccc;
        border-radius: 6px;
        font-size: 14px;
        background: #fafafa;
    }

    .filter-grid input:focus,
    .filter-grid select:focus {
        outline: none;
        border-color: #417690;
        background: #fff;
    }

    .btn-download {
        display: inline-block;
        padding: 10px 28px;
        background: linear-gradient(135deg, #28a745, #218838);
        color: #fff;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .btn-download:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        color: #fff;
    }

    .divider {
        border: none;
        border-top: 2px solid #eef1f5;
        margin: 10px 0 30px;
    }

    @media (max-width: 600px) {
        .filter-grid {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="report-container">

    <!-- Shared Datalists -->
    <datalist id="dept_options">
        {% for dept in departments %}
        <option value="{{ dept }}">
            {% endfor %}
    </datalist>



    <datalist id="status_options">
        <option value="pending">Pending (Not Returned)</option>
        <option value="returned">Returned</option>
        <option value="overdue">Overdue Only</option>
    </datalist>

    <!-- ‚ïê‚ïê‚ïê Entry-Exit Report ‚ïê‚ïê‚ïê -->
    <div class="report-card">
        <h2>üìã Entry-Exit Report (with Duration)</h2>
        <p class="desc">Download day-to-day entry/exit records with enrollment ID, name, department, mobile,
            and time duration.</p>
        <hr class="divider">
        <form method="get" action="{% url 'report_entry_exit' %}">
            <div class="filter-grid">
                <div>
                    <label>From Date</label>
                    <input type="date" name="date_from">
                </div>
                <div>
                    <label>To Date</label>
                    <input type="date" name="date_to">
                </div>
                <div style="grid-column: 1 / -1;">
                    <label>Department</label>
                    <input type="text" name="department" list="dept_options" placeholder="Select or type Department...">
                </div>
            </div>
            <button type="submit" class="btn-download">üì• Download Entry-Exit Excel</button>
        </form>
    </div>

    <!-- ‚ïê‚ïê‚ïê Book Issue Report ‚ïê‚ïê‚ïê -->
    <div class="report-card">
        <h2>üìö Book Issue Report</h2>
        <p class="desc">Download customized book issue records ‚Äî who borrowed which book, when, due date, and return
            status.</p>
        <hr class="divider">
        <form method="get" action="{% url 'report_book_issues' %}">
            <div class="filter-grid">
                <div>
                    <label>From Date</label>
                    <input type="date" name="date_from">
                </div>
                <div>
                    <label>To Date</label>
                    <input type="date" name="date_to">
                </div>
                <div style="grid-column: 1 / -1;">
                    <label>Department</label>
                    <input type="text" name="department" list="dept_options" placeholder="Select or type Department...">
                </div>
                <div style="grid-column: 1 / -1;">
                    <label>Book Status</label>
                    <input type="text" name="status" list="status_options" placeholder="Select Status...">
                </div>
            </div>
            <button type="submit" class="btn-download">üì• Download Book Issues Excel</button>
        </form>
    </div>

    <!-- ‚ïê‚ïê‚ïê Overdue Students Report ‚ïê‚ïê‚ïê -->
    <div class="report-card">
        <h2>‚ö†Ô∏è Overdue Students Report</h2>
        <p class="desc">Download a list of students who have overdue books, including contact details and number of
            overdue days.</p>
        <hr class="divider">
        <form method="get" action="{% url 'report_overdue_students' %}">
            <div class="filter-grid">
                <div>
                    <label>From Issue Date</label>
                    <input type="date" name="date_from">
                </div>
                <div>
                    <label>To Issue Date</label>
                    <input type="date" name="date_to">
                </div>
                <div style="grid-column: 1 / -1;">
                    <label>Department</label>
                    <input type="text" name="department" list="dept_options" placeholder="Select or type Department...">
                </div>
            </div>
            <button type="submit" class="btn-download"
                style="background: linear-gradient(135deg, #dc3545, #a71d2a); box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);">üì•
                Download Overdue Students Excel</button>
        </form>
    </div>

</div>
{% endblock %}